# Базовые настройки
-dontshrink
-dontoptimize
-dontnote
-dontwarn

# Сохраняем аннотации (важно для Spring)
-keepattributes *Annotation*,Exceptions,InnerClasses,Signature,Deprecated,SourceFile,LineNumberTable,*Annotation*,EnclosingMethod

# Spring Boot основные классы
-keep public class org.springframework.boot.** { *; }
-keep public class org.springframework.web.** { *; }
-keep public class org.springframework.context.** { *; }

# Главный класс приложения
-keep public class com.example.AudioServiceApplication {
    public static void main(java.lang.String[]);
}

# Сущности JPA
-keep class * implements org.springframework.data.jpa.repository.JpaRepository { *; }
-keep class com.example.model.** { *; }

# Feign клиенты
-keep class com.example.client.** { *; }

# MapStruct мапперы
-keep class com.example.mapper.** { *; }

# Lombok
-keep class lombok.* { *; }
-keep class * extends lombok.extern.slf4j.Slf4j { *; }

# Исключения для Swagger/OpenAPI
-keep class org.springdoc.** { *; }
-keep class io.swagger.v3.** { *; }